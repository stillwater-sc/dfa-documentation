<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.117.0"><meta name=generator content="Relearn 5.10.2+tip"><meta name=description content="Introduction and educational site for the design and optimization of parallel domain flow algorithms"><meta name=author content="E. Theodore L. Omtzigt"><title>BLAS Level 1 - Domain Flow Architecture</title><link href=../../images/favicon.png?1693414002 rel=icon type=image/png><link href=../../css/fontawesome-all.min.css?1693414002 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../css/fontawesome-all.min.css?1693414002 rel=stylesheet></noscript><link href=../../css/featherlight.min.css?1693414002 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../css/featherlight.min.css?1693414002 rel=stylesheet></noscript><link href=../../css/auto-complete.css?1693414002 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../css/auto-complete.css?1693414002 rel=stylesheet></noscript><link href=../../css/perfect-scrollbar.min.css?1693414002 rel=stylesheet><link href=../../css/nucleus.css?1693414002 rel=stylesheet><link href=../../css/fonts.css?1693414002 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../css/fonts.css?1693414002 rel=stylesheet></noscript><link href=../../css/theme.css?1693414002 rel=stylesheet><link href=../../css/theme-blue.css?1693414002 rel=stylesheet id=variant-style><link href=../../css/ie.css?1693414002 rel=stylesheet><link href=../../css/variant.css?1693414002 rel=stylesheet><link href=../../css/print.css?1693414002 rel=stylesheet media=print><script src=../../js/url.js?1693414002></script>
<script src=../../js/variant.js?1693414002></script>
<script>window.index_json_url="../../index.json";var root_url="../../",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="Copy to clipboard",window.T_Copied_to_clipboard="Copied to clipboard!",window.T_Copy_link_to_clipboard="Copy link to clipboard",window.T_Link_copied_to_clipboard="Copied link to clipboard!",window.T_No_results_found="No results found for \"{0}\"",window.T_N_results_found="{1} results found for \"{0}\"",baseUriFull="https://stillwater-sc.github.io/domain-flow/",window.variants&&variants.init(["blue","green","red","relearn-light","relearn-dark"])</script><script src=../../js/jquery.min.js?1693414002 defer></script></head><body class="mobile-support html" data-url=../../blas/level1/index.html><div id=body class=default-animation><div id=sidebar-overlay></div><div id=toc-overlay></div><nav id=topbar class=highlightable dir=ltr><div><div class=navigation><a class="nav nav-next" href=../../blas/level2/index.html title="BLAS Level 2 (&#129106;)"><i class="fas fa-chevron-right fa-fw"></i></a></div><div class=navigation><a class="nav nav-prev" href=../../blas/index.html title="Basic Linear Algebra (&#129104;)"><i class="fas fa-chevron-left fa-fw"></i></a></div><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a></span><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../index.html><span itemprop=name>Domain Flow Architecture</span></a><meta itemprop=position content="1">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../blas/index.html><span itemprop=name>Basic Linear Algebra</span></a><meta itemprop=position content="2">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>BLAS Level 1</span><meta itemprop=position content="3"></li></ol></div></div></nav><main id=body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><div id=head-tags></div><article class=default><h1 id=blas-level-1>BLAS Level 1</h1><p>BLAS Level 1 are
<span class="math align-center">$\mathcal{O}(N)$</span> class operators. This makes these operators operand access limited
and thus require careful distribution in a parallel environment.</p><p>There are four basic vector operations, and a fifth convenience operators.
Let
<span class="math align-center">$ \alpha \in \Bbb{R}, x \in \Bbb{R^n}, y \in \Bbb{R^n}, z \in \Bbb{R^n}$$</span> then:</p><ol><li><em><em>vector scale</em></em>: scalar-vector multiplication:
<span class="math align-center">$z = \alpha x \implies (z_i = \alpha x_i)$</span></li><li><em><em>vector element addition</em></em>:
<span class="math align-center">$z = x + y \implies (z_i = x_i + y_i)$</span></li><li><em><em>vector element multiply</em></em>:
<span class="math align-center">$z = x * y \implies (z_i = x_i * y_i)$</span></li><li><em><em>vector dot product</em></em>:
<span class="math align-center">$c = x^Ty \implies ( c = \sum_{i = 1}^n x_i y_i ) $</span>, aka inner-product</li><li><em><em>saxpy</em></em>, or <em>scalar alpha x plus y</em>,
<span class="math align-center">$z = \alpha x + y \implies z_i = \alpha x_i + y_i $</span></li></ol><p>The fifth operator, while technically redundant, makes the expressions of linear algebra algorithms
more concise.</p><p>One class of domain flow programs for these operators assumes a linear distribution of the vectors,
and propagation recurrences for scalar entities. For the dot product, we also use a propagation
recurrence to produce the scalar result.</p><h1 id=scalar-vector-multiplication>scalar-vector multiplication</h1><pre tabindex=0><code>compute ( (i,j,k) | 1 &lt;= i &lt;= N, j = 1, k = 1 ) {
    alpha: alpha[i-1,j,k]
    z: alpha[i-1,j,k] * x[i,j-1,k]  
}
</code></pre><p>Here the vector <em>x</em> being scaled is presented in space at the location <em>[i,0,1]</em>.
The scalar factor <em>alpha</em> is presented in space at <em>[0,1,1]</em> and is the propagated across
the vector elements in the <em>+i</em> direction.</p><p>Assume for the moment that we only have nearest neighbor communications, then the
broadcast of the scale factor <em>alpha</em> can be implemented in the form of a propagation.
It is the schedule of the broadcast that will determine the available concurrency
of this operator. In the description above, we have a completely sequential execution
schedule due to the propagation broadcast of the scaling factor.</p><h1 id=vector-addition>vector addition</h1><pre tabindex=0><code>compute ( (i,j,k) | 1 &lt;= i &lt;= N, j = 1, k = 1 ) {
    z: x[i,j-1,k] + y[i,j,k-1]    
}
</code></pre><p>In this articulation, the <em>x</em> vector is presented in space at location <em>[i,0,1]</em>, and
the <em>y</em> vector at location <em>[i,1,0]</em>. In this layout, there is no contention nor any
dependency between input elements, and this operator would be fully concurrent, and
would complete in a single step. The trick of course is that getting both vectors
distributed to that location to enable that concurrency. This speaks to the problem
of &lsquo;chaining&rsquo; operators together in such a way that the output of a vector generating
operator would deposit a vector spatially aligned for the next operator.</p><p>This is the first incling of the concept of <em>domain flow</em>. Vectors, matrices, and tensors
are all aggregate data structures that typically <em>move</em> through the machine as a
structured entity under the constraints of some <em>domain</em> specification: defined
by the <em>compute()</em> clause in the examples shown so far.</p><h1 id=vector-multiplication>vector multiplication</h1><pre tabindex=0><code>compute ( (i,j,k) | 1 &lt;= i &lt;= N, j = 1, k = 1 ) {
    z: x[i,j-1,k] * y[i,j,k-1]    
}
</code></pre><p>Element-wise vector multiplication follows the same domain structure as vector addition,
only the arithmetic operator switches from addition to multiplication.</p><h1 id=dot-product>dot product</h1><pre tabindex=0><code>compute ( (i,j,k) | 1 &lt;= i &lt;= N, j = 1, k = 1 ) {
    x: x[i,j-1,k]
    y: y[i,j,k-1]
    z: x[i,j-1,k] * y[i,j,k-1] + z[i-1,j,k]    
}
</code></pre><p>Using the same domain and vector layout as the element-wise vector addition described
previously, we can now construct a <em>dot</em>, or inner-product, operator. The <em>x</em> and <em>y</em>
vector elements come in from the <em>-j</em> and <em>-k</em> direction, and the starting or previous
partial result <em>z0</em> comes in from <em>[0,1,1]</em>.</p><p>Here we observe that even though the input vectors domain flow is entirely unconstrained,
the evolution of the <em>dot</em> product execution is completely sequential, caused by
the <em>z</em> partial sum propagating in the <em>+i</em> direction.</p><p>For the scale vector operator, we observe a similar serialization dynamic as the
inner-product operator, but in that operator the serialization is caused by having
to &lsquo;broadcast&rsquo; the scalar value across the spatial domain of the <em>x</em> vector.</p><h1 id=saxpy>SAXPY</h1><pre tabindex=0><code>compute ( (i,j,k) | 1 &lt;= i &lt;= N, j = 1, k = 1 ) {
    alpha: alpha[i-1,j,k]
    z: alpha[i-1,j,k] * x[i,j-1,k] + y[i,j,k-1]    
}
</code></pre><p>The final <em>scalar alpha x plus y</em>, or <em>saxpy</em> operator is combining the vector scale
and vector addition operators, and will show the same constraint as the vector scale
operator due to the required propagation broadcast of the scaling factor.</p><footer class=footline></footer></article></div></main></div><aside id=sidebar class="default-animation showVisitedLinks" dir=ltr><div id=header-wrapper class=default-animation><div id=header class=default-animation><a href=https://stillwater-sc.github.io/domain-flow><img src=https://stillwater-sc.github.io/domain-flow/images/stillwater-logo.png alt="Stillwater Supercomputing, Inc."></a></div><form action=../../search.html method=get><div class="searchbox default-animation"><button type=submit title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
<label class=a11y-only for=search-by>Search</label>
<input data-search-input id=search-by name=search-by class=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div></form><script>var contentLangs=["en"]</script><script src=../../js/auto-complete.js?1693414002 defer></script>
<script src=../../js/lunr/lunr.min.js?1693414002 defer></script>
<script src=../../js/lunr/lunr.stemmer.support.min.js?1693414002 defer></script>
<script src=../../js/lunr/lunr.multi.min.js?1693414002 defer></script>
<script src=../../js/lunr/lunr.en.min.js?1693414002 defer></script>
<script src=../../js/search.js?1693414002 defer></script></div><div id=content-wrapper class=highlightable><ul class=topics><li data-nav-id=/introduction/index.html class="dd-item alwaysopen"><a href=../../introduction/index.html>Domain Flow Algorithms<i class="fas fa-check read-icon"></i></a><ul id=subsections-db5db1cf4b1800282ddcebf5cde99c36><li data-nav-id=/introduction/example/index.html class=dd-item><a href=../../introduction/example/index.html>An Example<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/introduction/parallel-programming/index.html class=dd-item><a href=../../introduction/parallel-programming/index.html>Parallel Programming<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/introduction/spacetime/index.html class=dd-item><a href=../../introduction/spacetime/index.html>Spacetime<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/introduction/computational-spacetime/index.html class=dd-item><a href=../../introduction/computational-spacetime/index.html>Computational Spacetime<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/introduction/domain-flow/index.html class=dd-item><a href=../../introduction/domain-flow/index.html>Domain Flow<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/introduction/freeschedule/index.html class=dd-item><a href=../../introduction/freeschedule/index.html>Free Schedule<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/introduction/linearschedule/index.html class=dd-item><a href=../../introduction/linearschedule/index.html>Linear Schedules<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/introduction/derivation/index.html class=dd-item><a href=../../introduction/derivation/index.html>Derivation<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/introduction/wavefront/index.html class=dd-item><a href=../../introduction/wavefront/index.html>Wavefronts of Computation<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/introduction/nextsteps/index.html class=dd-item><a href=../../introduction/nextsteps/index.html>Next Steps<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/design/index.html class="dd-item alwaysopen"><a href=../../design/index.html>Elements of Good Design<i class="fas fa-check read-icon"></i></a><ul id=subsections-d25739b54eec6c54b486058b3e2f3701><li data-nav-id=/design/currentstate/index.html class=dd-item><a href=../../design/currentstate/index.html>Computational Dynamics<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/design/elements/index.html class=dd-item><a href=../../design/elements/index.html>Elements of Design<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/design/dfm/index.html class=dd-item><a href=../../design/dfm/index.html>Data Flow Machine<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/design/time/index.html class=dd-item><a href=../../design/time/index.html>Time: the when<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/design/space/index.html class=dd-item><a href=../../design/space/index.html>Space: the where<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/design/nextsteps/index.html class=dd-item><a href=../../design/nextsteps/index.html>Next Steps<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/blas/index.html class="dd-item parent alwaysopen"><a href=../../blas/index.html>Basic Linear Algebra<i class="fas fa-check read-icon"></i></a><ul id=subsections-c04c91366fb5eba2efaaddab304f1204><li data-nav-id=/blas/level1/index.html class="dd-item active"><a href=../../blas/level1/index.html>BLAS Level 1<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/blas/level2/index.html class=dd-item><a href=../../blas/level2/index.html>BLAS Level 2<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/blas/level3/index.html class=dd-item><a href=../../blas/level3/index.html>BLAS Level 3<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/factorization/index.html class="dd-item alwaysopen"><a href=../../factorization/index.html>Matrix Factorization<i class="fas fa-check read-icon"></i></a><ul id=subsections-ad68331fc764b7acec0f1f237c6522bf><li data-nav-id=/factorization/factorization/index.html class=dd-item><a href=../../factorization/factorization/index.html>Matrix Factorizations<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/matrixkernels/index.html class="dd-item alwaysopen"><a href=../../matrixkernels/index.html>Matrix Kernels<i class="fas fa-check read-icon"></i></a><ul id=subsections-7c2bfc25d3abc9a62b3397c74cd33be7><li data-nav-id=/matrixkernels/matrixkernels/index.html class=dd-item><a href=../../matrixkernels/matrixkernels/index.html>Matrix Kernels<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/linearsolvers/index.html class="dd-item alwaysopen"><a href=../../linearsolvers/index.html>Linear Solvers<i class="fas fa-check read-icon"></i></a><ul id=subsections-5d80ff15816d384ff301e1b89749e656><li data-nav-id=/linearsolvers/solvers/index.html class=dd-item><a href=../../linearsolvers/solvers/index.html>Linear Solvers<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/linearsolvers/lu/index.html class=dd-item><a href=../../linearsolvers/lu/index.html>Gaussian Elimination<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/dsp/index.html class="dd-item alwaysopen"><a href=../../dsp/index.html>Digital Signal Processing<i class="fas fa-check read-icon"></i></a><ul id=subsections-4754de0756cee74566595d24a3898516><li data-nav-id=/dsp/conditioning/index.html class=dd-item><a href=../../dsp/conditioning/index.html>Signal Conditioning<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/dsp/filters/index.html class=dd-item><a href=../../dsp/filters/index.html>Digital Filtering<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/dsp/identification/index.html class=dd-item><a href=../../dsp/identification/index.html>Identification<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/dsp/spectral/index.html class=dd-item><a href=../../dsp/spectral/index.html>Spectral Analysis<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/dsp/transforms/index.html class=dd-item><a href=../../dsp/transforms/index.html>Transforms<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/contentdev/index.html class="dd-item alwaysopen"><a href=../../contentdev/index.html>Content Development<i class="fas fa-check read-icon"></i></a><ul id=subsections-d21e4297ce5ab9b266fb06efa131e45d><li data-nav-id=/contentdev/prototype/index.html class=dd-item><a href=../../contentdev/prototype/index.html>Prototype<i class="fas fa-check read-icon"></i></a></li></ul></li></ul><div class="footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVariantSwitch showVisitedLinks showFooter"></div><hr class="default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVariantSwitch showVisitedLinks showFooter"><div id=prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks showVariantSwitch showVisitedLinks"><ul><li id=select-language-container class=footerLangSwitch><div class="padding select-container"><i class="fas fa-language fa-fw"></i>
<span>&nbsp;</span><div class=select-style><label class=a11y-only for=select-language>Language</label>
<select id=select-language onchange="location=baseUri+this.value"></select></div><div class=select-clear></div></div></li><li id=select-variant-container class="footerVariantSwitch showVariantSwitch"><div class="padding select-container"><i class="fas fa-paint-brush fa-fw"></i>
<span>&nbsp;</span><div class=select-style><label class=a11y-only for=select-variant>Theme</label>
<select id=select-variant onchange=window.variants&&variants.changeVariant(this.value)><option id=blue value=blue selected>Blue</option><option id=green value=green>Green</option><option id=red value=red>Red</option><option id=relearn-light value=relearn-light>Relearn Light</option><option id=relearn-dark value=relearn-dark>Relearn Dark</option></select></div><div class=select-clear></div></div><script>window.variants&&variants.markSelectedVariant()</script></li><li class="footerVisitedLinks showVisitedLinks"><button class=padding onclick=clearHistory()><i class="fas fa-history fa-fw"></i> Clear History</button></li></ul></div><div id=footer class="footerFooter showFooter"><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn title=love><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></aside><script src=../../js/clipboard.min.js?1693414002 defer></script>
<script src=../../js/perfect-scrollbar.min.js?1693414002 defer></script>
<script src=../../js/featherlight.min.js?1693414002 defer></script>
<script>function useMathJax(e){if(!Object.assign)return;window.MathJax=Object.assign(window.MathJax||{},{loader:{load:["[tex]/mhchem"]},startup:{elements:[".math"]},tex:{inlineMath:[["$","$"],["\\(","\\)"]]},options:{enableMenu:!1}},e)}useMathJax(JSON.parse("{}"))</script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script>
<script src=../../js/jquery.svg.pan.zoom.js?1693414002 defer></script>
<script src=https://unpkg.com/mermaid/dist/mermaid.min.js defer></script>
<script>window.themeUseMermaid=JSON.parse('{ "theme": "default" }')</script><script src=https://unpkg.com/rapidoc/dist/rapidoc-min.js defer></script>
<script>window.themeUseSwagger=JSON.parse('{ "theme": "light" }')</script><script src=../../js/theme.js?1693414002 defer></script></body></html>