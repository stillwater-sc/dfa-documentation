<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.110.0"><meta name=generator content="Relearn 5.10.2+tip"><meta name=description content="Introduction and educational site for the design and optimization of parallel domain flow algorithms"><meta name=author content="E. Theodore L. Omtzigt"><title>Linear Schedules - Domain Flow Architecture</title><link href=../../images/favicon.png?1675124967 rel=icon type=image/png><link href=../../css/fontawesome-all.min.css?1675124967 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../css/fontawesome-all.min.css?1675124967 rel=stylesheet></noscript><link href=../../css/featherlight.min.css?1675124967 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../css/featherlight.min.css?1675124967 rel=stylesheet></noscript><link href=../../css/auto-complete.css?1675124967 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../css/auto-complete.css?1675124967 rel=stylesheet></noscript><link href=../../css/perfect-scrollbar.min.css?1675124967 rel=stylesheet><link href=../../css/nucleus.css?1675124967 rel=stylesheet><link href=../../css/fonts.css?1675124967 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=../../css/fonts.css?1675124967 rel=stylesheet></noscript><link href=../../css/theme.css?1675124967 rel=stylesheet><link href=../../css/theme-blue.css?1675124967 rel=stylesheet id=variant-style><link href=../../css/ie.css?1675124967 rel=stylesheet><link href=../../css/variant.css?1675124967 rel=stylesheet><link href=../../css/print.css?1675124967 rel=stylesheet media=print><script src=../../js/url.js?1675124967></script>
<script src=../../js/variant.js?1675124967></script>
<script>window.index_json_url="../../index.json";var root_url="../../",baseUriFull,baseUri=root_url.replace(/\/$/,"");window.T_Copy_to_clipboard="Copy to clipboard",window.T_Copied_to_clipboard="Copied to clipboard!",window.T_Copy_link_to_clipboard="Copy link to clipboard",window.T_Link_copied_to_clipboard="Copied link to clipboard!",window.T_No_results_found="No results found for \u0022{0}\u0022",window.T_N_results_found="{1} results found for \u0022{0}\u0022",baseUriFull="https://stillwater-sc.github.io/domain-flow/",window.variants&&variants.init(["blue","green","red","relearn-light","relearn-dark"])</script><script src=../../js/jquery.min.js?1675124967 defer></script></head><body class="mobile-support html" data-url=../../introduction/linearschedule/index.html><div id=body class=default-animation><div id=sidebar-overlay></div><div id=toc-overlay></div><nav id=topbar class=highlightable dir=ltr><div><div id=breadcrumbs><span id=sidebar-toggle-span><a href=# id=sidebar-toggle title='Menu (CTRL+ALT+n)'><i class="fas fa-bars fa-fw"></i></a></span><ol class=links itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../index.html><span itemprop=name>Domain Flow Architecture</span></a><meta itemprop=position content="1">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=../../introduction/index.html><span itemprop=name>Getting Started</span></a><meta itemprop=position content="2">></li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Linear Schedules</span><meta itemprop=position content="3"></li></ol></div></div></nav><main id=body-inner class="highlightable default" tabindex=-1><div class=flex-block-wrapper><div id=head-tags><div class=tags><a class=tag-link href=../../tags/linear-schedule/index.html>linear-schedule</a>
<a class=tag-link href=../../tags/matrix-multiply/index.html>matrix-multiply</a></div></div><script src=https://stillwater-sc.github.io/domain-flow/js/build/three.js></script>
<script src=https://stillwater-sc.github.io/domain-flow/js/controls/OrbitControls.js></script>
<script src=https://stillwater-sc.github.io/domain-flow/js/Detector.js></script>
<script src=https://stillwater-sc.github.io/domain-flow/js/libs/numeric-1.2.6.js></script>
<script src=https://stillwater-sc.github.io/domain-flow/js/dfa/indexspace.js></script>
<script src=https://stillwater-sc.github.io/domain-flow/js/dfa/freeschedule.js></script>
<script src=https://stillwater-sc.github.io/domain-flow/js/dfa/wavefront.js></script>
<script type=x-shader/x-vertex id=vertexshader>

			attribute float size;
			attribute vec3 customColor;

			varying vec3 vColor;

			void main() {

				vColor = customColor;

				vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );

				gl_PointSize = size * ( 300.0 / -mvPosition.z );

				gl_Position = projectionMatrix * mvPosition;

			}

		</script><script type=x-shader/x-vertex id=wavefrontshader>
			uniform float time;
			uniform float cardinality;
			attribute float schedule;
			attribute float size;
			attribute vec3 customColor;

			varying vec3 vColor;

			void main() {

				vColor = customColor;

				vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );

				// scale particles as objects in 3D space that modulate in size as a computational wavefront passes through
				float period = mod(time, cardinality);  // set a modulo range so the visualization cycles

				// modulate a full sinusoid long: (sin(-pi/2), sin(3*pi/2))
				if (period > (schedule - 1.0) && period &lt; (schedule + 1.0)) {

				    gl_PointSize = (1.5 + sin((period - schedule)*3.14 + 1.57)) * ( 300.0 / length( mvPosition.xyz ) );

				} else {

				    gl_PointSize = size * ( 100.0 / -mvPosition.z );

				}

				gl_Position = projectionMatrix * mvPosition;

			}

		</script><script type=x-shader/x-vertex id=wavefrontshader2>
			uniform float time;
			uniform float cardinality;
			attribute float schedule;
			attribute float size;
			attribute vec3 customColor;

			varying vec3 vColor;

			void main() {

				vColor = customColor;

				vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );

				// scale particles as objects in 3D space that modulate in size as a computational wavefront passes through
				float period = mod(time, cardinality);  // set a modulo range so the visualization cycles

				// modulate a full sinusoid long: (sin(-pi/2), sin(3*pi/2))
				if (period > (schedule - 1.0) && period &lt; (schedule + 1.0)) {

				    gl_PointSize = (1.5 + sin((period - schedule)*3.14 + 1.57)) * ( 300.0 / length( mvPosition.xyz ) );

				} else {

				    gl_PointSize = size * ( 100.0 / -mvPosition.z );

				}

				gl_Position = projectionMatrix * mvPosition;

			}

		</script><script type=x-shader/x-fragment id=fragmentshader>

			uniform vec3 color;
			uniform sampler2D texture;

			varying vec3 vColor;

			void main() {

				gl_FragColor = vec4( color * vColor, 1.0 );

				gl_FragColor = gl_FragColor * texture2D( texture, gl_PointCoord );

				if ( gl_FragColor.a &lt; ALPHATEST ) discard;

			}

</script><script>Detector.webgl||Detector.addGetWebGLMessage();var t,scenes=[],canvas,renderer,views=[],PARTICLE_SIZE=2,clock=new THREE.Clock(!0);window.onload=init;function init(){canvas=document.getElementById("c"),renderer=new THREE.WebGLRenderer({canvas,antialias:!0}),renderer.setClearColor(16777215),renderer.setPixelRatio(window.devicePixelRatio);var e,n,s,i,a,r,c="linearschedule_animation",o=document.getElementById(c);views.push(o),i=createIndexSpaceGeometry(20,20,20,1,!1,!1),a=PARTICLE_SIZE*.5,r="https://stillwater-sc.github.io/domain-flow/textures/sprites/ball.png",uniforms2={cardinality:{value:60},time:{value:1},color:{value:new THREE.Color(16777215)},texture:{value:(new THREE.TextureLoader).load(r)}},e=createWavefrontScene(i,a,"wavefrontshader2","fragmentshader",uniforms2,schedule),e.userData.view=o,n=new THREE.PerspectiveCamera(75,1,.1,1e3),n.position.set(25,25,25),e.userData.camera=n,s=new THREE.OrbitControls(n,o),s.minDistance=20,s.maxDistance=500,e.userData.controls=s,scenes.push(e),t=0,animate()}function updateSize(){var e=canvas.clientWidth,t=canvas.clientHeight;(canvas.width!==e||canvas.height!=t)&&renderer.setSize(e,t,!1)}function animate(){render(),requestAnimationFrame(animate)}function schedule(e,t){return numeric.dot(e,t)}function render(){updateSize(),renderer.setClearColor(16777215),renderer.setScissorTest(!1),renderer.clear(),renderer.setClearColor(0),renderer.setScissorTest(!0),scenes.forEach(function(e){var s,o,i,a,n=e.userData.view.getBoundingClientRect();if(n.bottom<0||n.top>renderer.domElement.clientHeight||n.right<0||n.left>renderer.domElement.clientWidth)return;s=n.right-n.left,o=n.bottom-n.top,i=n.left,a=renderer.domElement.clientHeight-n.bottom,renderer.setViewport(i,a,s,o),renderer.setScissor(i,a,s,o),uniforms2.time.value=t,renderer.render(e,e.userData.camera),e.children[0].geometry.verticesNeedUpdate=!0}),t=clock.getElapsedTime()}</script><p><canvas id=c></canvas></p><p>In the previous section, we saw what the computational evolution of an unconstrained parallel algorithm looks like.
However, an actual physical system would have finite resources, and certainly limited operand bandwidth.</p><p><em>The free schedule of a parallel algorithm tends to be unrealizable as the size of the problem grows.</em></p><p>Let&rsquo;s go through the thought experiment what the free schedule demands from a physical system.
In the free schedule animation, the propagation recurrences distributing the $A$ and $B$ matrix elements
throughout the 3D lattice run &lsquo;ahead&rsquo; of the actual computational recurrence calculating the $C$ matrix
elements.</p><p>The <em>A</em> and <em>B</em> matrix elements arrive at their destination earlier than when they are consumed.
A physical system would need to have memory to hold these operands until
all of the operands are present and the computation can commence. The extra memory required to hold
these operands is consuming space and energy;
attributes an algorithm designer would want to optimize.</p><p>Looking more closely at the wavefront that expresses the evolution of the <em>C</em> matrix elements, we
can observe that the wavefront evolves as a two-dimensional plane with normal $[1 1 1]^T$.
This implies that if we <em>constrain</em> the <em>A</em> and <em>B</em> propagation to evolve along this same wavefront
then all memory requirements would disappear as we deliver the matrix elements just in time
to participate in the computational event:</p><p>$$c: c[i,j,k-1] + a[i,j-1,k] * b[i-1, j,k]$$.</p><p>This constrained, <em>linear</em> schedule is shown in the next animation.</p><div id=linearschedule_animation>_</div><p>This particular schedule is called <em>memoryless</em>, that is, no memory is required to execute along this
evolution. Another way to look at this is that the memory function is provided by the network and the act of
communicating operands between locations in the lattice. From an energy perspective, this is attractive as
no additional energy is required to read or write from scratch memories that are needed just to align operand
timing. As mentioned before, the operands are delivered to the computation when they can be consumed.</p><p>Another observation we can make is that this memoryless, linear schedule exhibits $O(N^2)$
concurrency. The index space is $O(N^3)$, but the concurrency of the algorithm is just
$O(N^2)$. This implies that we can create a custom execution engine for
this execution pattern that only uses $O(N^2)$ resources and still would be unconstrained.</p><p>If we compare the concurrency requirements of the free schedule with our memoryless, linear schedule we
see that the free schedule exhibits resource requirements of the order of $O(N^3)$:
the $a$ and $b$ recurrences race ahead of the computation and occupy resources as they are waiting for the
computation to consume them. The free schedule is interesting from a theoretical perspective as it
shows us the unconstrained evolution, or inherent concurrency, of the algorithm. But for building an
actual, efficient computational engine, the free schedule tends to be too expensive. The exception, of course,
is when the size of the problem matches the number of hardware resources available. In these cases,
we can instantiate the complete computational graph in hardware. This is not uncommon for signal processing
applications, and clever pipelining of multiple problems on the same hardware can improve utilization.</p></div></main></div><aside id=sidebar class=default-animation dir=ltr><div id=header-wrapper class=default-animation><div id=header class=default-animation><a href=https://stillwater-sc.github.io/domain-flow><img src=https://stillwater-sc.github.io/domain-flow/images/stillwater-logo.png alt="Stillwater Supercomputing, Inc."></a></div><form action=../../search.html method=get><div class="searchbox default-animation"><button type=submit title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
<label class=a11y-only for=search-by>Search</label>
<input data-search-input id=search-by name=search-by class=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div></form><script>var contentLangs=["en"]</script><script src=../../js/auto-complete.js?1675124967 defer></script>
<script src=../../js/lunr/lunr.min.js?1675124967 defer></script>
<script src=../../js/lunr/lunr.stemmer.support.min.js?1675124967 defer></script>
<script src=../../js/lunr/lunr.multi.min.js?1675124967 defer></script>
<script src=../../js/lunr/lunr.en.min.js?1675124967 defer></script>
<script src=../../js/search.js?1675124967 defer></script></div><div id=content-wrapper class=highlightable><ul class=topics><li data-nav-id=/introduction/index.html class="dd-item parent alwaysopen"><a href=../../introduction/index.html>Getting Started</a><ul id=subsections-db5db1cf4b1800282ddcebf5cde99c36><li data-nav-id=/introduction/example/index.html class=dd-item><a href=../../introduction/example/index.html>An Example</a></li><li data-nav-id=/introduction/parallel-programming/index.html class=dd-item><a href=../../introduction/parallel-programming/index.html>Parallel Programming</a></li><li data-nav-id=/introduction/spacetime/index.html class=dd-item><a href=../../introduction/spacetime/index.html>Spacetime</a></li><li data-nav-id=/introduction/computational-spacetime/index.html class=dd-item><a href=../../introduction/computational-spacetime/index.html>Computational Spacetime</a></li><li data-nav-id=/introduction/domain-flow/index.html class=dd-item><a href=../../introduction/domain-flow/index.html>Domain Flow</a></li><li data-nav-id=/introduction/freeschedule/index.html class=dd-item><a href=../../introduction/freeschedule/index.html>Free Schedule</a></li><li data-nav-id=/introduction/linearschedule/index.html class="dd-item active"><a href=../../introduction/linearschedule/index.html>Linear Schedules</a></li><li data-nav-id=/introduction/derivation/index.html class=dd-item><a href=../../introduction/derivation/index.html>Derivation</a></li><li data-nav-id=/introduction/nextsteps/index.html class=dd-item><a href=../../introduction/nextsteps/index.html>Next Steps</a></li><li data-nav-id=/introduction/webgl/index.html class=dd-item><a href=../../introduction/webgl/index.html>Webgl</a></li></ul></li><li data-nav-id=/design/index.html class="dd-item alwaysopen"><a href=../../design/index.html>Elements of Good Design</a><ul id=subsections-d25739b54eec6c54b486058b3e2f3701><li data-nav-id=/design/currentstate/index.html class=dd-item><a href=../../design/currentstate/index.html>Algorithm Dynamics</a></li><li data-nav-id=/design/elements/index.html class=dd-item><a href=../../design/elements/index.html>Elements of Design</a></li><li data-nav-id=/design/dfm/index.html class=dd-item><a href=../../design/dfm/index.html>Data Flow Machine</a></li><li data-nav-id=/design/time/index.html class=dd-item><a href=../../design/time/index.html>Time: the when</a></li><li data-nav-id=/design/space/index.html class=dd-item><a href=../../design/space/index.html>Space: the where</a></li><li data-nav-id=/design/nextsteps/index.html class=dd-item><a href=../../design/nextsteps/index.html>Next Steps</a></li></ul></li><li data-nav-id=/blas/index.html class="dd-item alwaysopen"><a href=../../blas/index.html>Basic Linear Algebra</a><ul id=subsections-c04c91366fb5eba2efaaddab304f1204><li data-nav-id=/blas/level1/index.html class=dd-item><a href=../../blas/level1/index.html>BLAS Level 1</a></li><li data-nav-id=/blas/level2/index.html class=dd-item><a href=../../blas/level2/index.html>BLAS Level 2</a></li><li data-nav-id=/blas/level3/index.html class=dd-item><a href=../../blas/level3/index.html>BLAS Level 3</a></li></ul></li><li data-nav-id=/factorization/index.html class="dd-item alwaysopen"><a href=../../factorization/index.html>Matrix Factorization</a><ul id=subsections-ad68331fc764b7acec0f1f237c6522bf><li data-nav-id=/factorization/factorization/index.html class=dd-item><a href=../../factorization/factorization/index.html>Matrix Factorizations</a></li></ul></li><li data-nav-id=/matrixkernels/index.html class="dd-item alwaysopen"><a href=../../matrixkernels/index.html>Matrix Kernels</a><ul id=subsections-7c2bfc25d3abc9a62b3397c74cd33be7><li data-nav-id=/matrixkernels/matrixkernels/index.html class=dd-item><a href=../../matrixkernels/matrixkernels/index.html>Matrix Kernels</a></li></ul></li><li data-nav-id=/linearsolvers/index.html class="dd-item alwaysopen"><a href=../../linearsolvers/index.html>Linear Solvers</a><ul id=subsections-5d80ff15816d384ff301e1b89749e656><li data-nav-id=/linearsolvers/solvers/index.html class=dd-item><a href=../../linearsolvers/solvers/index.html>Linear Solvers</a></li><li data-nav-id=/linearsolvers/lu/index.html class=dd-item><a href=../../linearsolvers/lu/index.html>Gaussian Elimination</a></li></ul></li></ul><div class="footermargin footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVariantSwitch showFooter"></div><hr class="default-animation footerLangSwitch footerVariantSwitch footerVisitedLinks footerFooter showVariantSwitch showFooter"><div id=prefooter class="footerLangSwitch footerVariantSwitch footerVisitedLinks showVariantSwitch"><ul><li id=select-language-container class=footerLangSwitch><div class="padding select-container"><i class="fas fa-language fa-fw"></i>
<span>&nbsp;</span><div class=select-style><label class=a11y-only for=select-language>Language</label>
<select id=select-language onchange="location=baseUri+this.value"></select></div><div class=select-clear></div></div></li><li id=select-variant-container class="footerVariantSwitch showVariantSwitch"><div class="padding select-container"><i class="fas fa-paint-brush fa-fw"></i>
<span>&nbsp;</span><div class=select-style><label class=a11y-only for=select-variant>Theme</label>
<select id=select-variant onchange=window.variants&&variants.changeVariant(this.value)><option id=blue value=blue selected>Blue</option><option id=green value=green>Green</option><option id=red value=red>Red</option><option id=relearn-light value=relearn-light>Relearn Light</option><option id=relearn-dark value=relearn-dark>Relearn Dark</option></select></div><div class=select-clear></div></div><script>window.variants&&variants.markSelectedVariant()</script></li><li class=footerVisitedLinks><button class=padding onclick=clearHistory()><i class="fas fa-history fa-fw"></i> Clear History</button></li></ul></div><div id=footer class="footerFooter showFooter"><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn title=love><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></aside><script src=../../js/clipboard.min.js?1675124967 defer></script>
<script src=../../js/perfect-scrollbar.min.js?1675124967 defer></script>
<script src=../../js/featherlight.min.js?1675124967 defer></script>
<script src=../../js/theme.js?1675124967 defer></script></body></html>